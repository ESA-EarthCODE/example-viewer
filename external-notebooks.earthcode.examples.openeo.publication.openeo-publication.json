{"version":2,"kind":"Notebook","sha256":"50f902978d25b64e03459a53fdd0006922763f5f701ed25a6fe4e30063404ef1","slug":"external-notebooks.earthcode.examples.openeo.publication.openeo-publication","location":"/external_notebooks/earthcode/examples/openeo/publication/openeo_publication.ipynb","dependencies":[],"frontmatter":{"title":"LPS 2025 – Enabling Open Science with EarthCODE and the Copernicus Dataspace Ecosystem openEO Federation","content_includes_title":false,"kernelspec":{"name":"openeo","display_name":"OpenEO","language":"python"},"github":"https://github.com/esa-earthcode/example-viewer/","subject":"EarthCODE Examples","numbering":{"title":{"offset":5}},"source_url":"https://github.com/esa-earthcode/example-viewer//blob/main/external_notebooks/earthcode/examples/openeo/publication/openeo_publication.ipynb","edit_url":"https://github.com/esa-earthcode/example-viewer//edit/main/external_notebooks/earthcode/examples/openeo/publication/openeo_publication.ipynb","thumbnail":"/example-viewer/build/16144fd3808634385c6cf89d244cda6b.png","exports":[{"format":"ipynb","filename":"openeo_publication.ipynb","url":"/example-viewer/build/openeo_publication-78fce16306777a9f208f39fc6cb34f4b.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook presents a complete end-to-end example demonstrating how EarthCODE and the Copernicus Dataspace Ecosystem (CDSE) openEO federation facilitate Open Science. Specifically, it shows how users can create, execute, and publish experiments to the EarthCODE Open Science Catalogue (OSC).","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CZidpgB2OE"}],"key":"OujPFoRMdO"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The notebook will guide you through the following steps:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nnKyu2q8a1"}],"key":"zZYtzB9OiI"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Create a Workflow using openEO","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"m6L8deekiE"}],"key":"Yc3GrC4SBH"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Tvg8Z8501H"},{"type":"text","value":"A workflow defines the sequence of processing steps to be executed. We will use the CDSE JupyterHub environment, the CDSE openEO federation, and the openEO Python client to build a User Defined Process (UDP).","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zj3Dx82wjb"}],"key":"l3ZrVbN4Km"}],"key":"SSWF23PeNg"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Create and Run an Experiment","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"h22eUiIyIe"}],"key":"eoERYe7ncw"},{"type":"break","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"SRWP1zij5I"},{"type":"text","value":"In EarthCODE, an experiment corresponds to running a workflow on specific input data with defined parameters, producing an output product. We will create a batch job within the CDSE environment using openEO tools to execute the workflow from Step 1, producing a result product.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Qv8sSRdAq6"}],"key":"kgG4ajkBWr"}],"key":"heQbWO50Ma"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Publish the Experiment to the Open Science Catalogue","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"EDPcOnQTff"}],"key":"Etla7zc0lH"},{"type":"break","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ICkr50D6tw"},{"type":"text","value":"Using EarthCODE tools, we will publish the experiment  to the Open Science Catalogue, simulating how research can be shared with the scientific community.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"n5gB71mRTc"}],"key":"nRaI1fjU6k"}],"key":"lNQVMZLkc9"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Reproduce the Experiment","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"TurjNZWlOr"}],"key":"xEaYUiw0vx"},{"type":"text","value":"\nFinally, we will demonstrate how experiments published in the Open Science Catalogue can be reproduced using the CDSE environment and openEO tools, reinforcing the principles of Open Science.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"kFcV7uHjJp"}],"key":"A3HuCpoSdH"}],"key":"PMqEtF6ER5"}],"key":"ILG884wb7C"},{"type":"image","url":"/example-viewer/build/16144fd3808634385c6cf89d244cda6b.png","alt":"image.png","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"xOVM0qA347","urlSource":"data:image/png;base64,iVBORw0KGg...lFTkSuQmCC"},{"type":"code","lang":"","value":"","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"GwwWL7Vypq"}],"key":"JUOxUJp1Ie"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import rasterio\nimport matplotlib.pyplot as plt\n\ndef visualise_tif(path: str):\n    with rasterio.open(path) as src:\n        data = src.read(1)  # Read the first band\n        plt.figure(figsize=(10, 10))\n        plt.imshow(data, cmap='viridis')\n        plt.colorbar()\n        plt.show()","key":"dFawTtIFp3"},{"type":"output","id":"0qfz5MaehUAbPOSOcGnfh","data":[],"key":"yTMzIDOxEu"}],"key":"NiJwgIJPIV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connection with CDSE openEO Federation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZBGalUi75o"}],"identifier":"connection-with-cdse-openeo-federation","label":"Connection with CDSE openEO Federation","html_id":"connection-with-cdse-openeo-federation","implicit":true,"key":"JwCgEtLy28"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The first step, before creating any processing workflow in openEO, is to authenticate with an available openEO backend. In this example, we will use the CDSE openEO federation, which provides seamless access to both datasets and processing resources across multiple federated openEO backends.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rq8MiAsIWI"}],"key":"hssZaH2P1S"}],"key":"iFuzDOR1WX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import openeo","key":"VIrcQK0Llj"},{"type":"output","id":"K7eOreVptP2ajn7blwASW","data":[],"key":"q0Au3KGaI6"}],"key":"Nln1yL5ONt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"connection = openeo.connect(url=\"openeofed.dataspace.copernicus.eu\").authenticate_oidc()","key":"BlwONl4RNe"},{"type":"output","id":"gcBQx1JOAQNFz2S9tAWxt","data":[{"name":"stdout","output_type":"stream","text":"Authenticated using refresh token.\n"}],"key":"AQMAx8mexJ"}],"key":"xbytQaH8cH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 1 - Creating the worklow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MMOsIPYReu"}],"identifier":"step-1-creating-the-worklow","label":"Step 1 - Creating the worklow","html_id":"step-1-creating-the-worklow","implicit":true,"key":"y07uE753Ft"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Before we begin creating the experiment, we need to create a workflow in openEO. This workflow will be utilised in our experiment, along with input and output parameters, to generate a specific product. We will build the workflow using an openEO ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cHOTe5M8F9"},{"type":"link","url":"https://open-eo.github.io/openeo-python-client/udp.html","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"User Defined Process (UDP)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"D892TARY3U"}],"urlSource":"https://open-eo.github.io/openeo-python-client/udp.html","key":"uuI1t44nEd"},{"type":"text","value":". UDPs allow you to encapsulate your processing workflow, which consists of multiple steps, into reusable openEO building blocks that can be called with a single command.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PHGEPEuuvJ"}],"key":"iLILd7RJFX"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"In this notebook, we will create a workflow to generate a variability map. In a variability map, each image pixel is assigned a specific category, which represents the deviation of the pixel value from the mean pixel value. These maps can be used to implement precision agriculture practices by applying different fertilization strategies for each category. For instance, a farmer might choose to apply more product to areas of the field that exhibit a negative deviation and less to those with positive deviations (enhancing poorer areas), or concentrate the application on regions with positive deviations (focusing on the more productive areas of the field).","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fYfVT7lt2T"}],"key":"oYMuGNchdO"}],"key":"MFShOc9aZi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Defining the workflow parameters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YrM7wPrRKF"}],"identifier":"defining-the-workflow-parameters","label":"Defining the workflow parameters","html_id":"defining-the-workflow-parameters","implicit":true,"key":"uDghX6IEHL"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The first step in creating an openEO workflow is specifying the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"u2t22XTRnk"},{"type":"link","url":"https://open-eo.github.io/openeo-python-client/api.html#openeo.api.process.Parameter","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"input parameters","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rYEQZceyca"}],"urlSource":"https://open-eo.github.io/openeo-python-client/api.html#openeo.api.process.Parameter","key":"qTuKfMpb1B"},{"type":"text","value":". These parameters enable users to execute the workflow with their own custom settings, making it adaptable to different datasets and use cases. openEO provides built-in ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"tka2zApv1f"},{"type":"link","url":"https://open-eo.github.io/openeo-python-client/udp.html#process-parameters","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"helper functions","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"heLREXDtV6"}],"urlSource":"https://open-eo.github.io/openeo-python-client/udp.html#process-parameters","key":"oYjxWEnfpi"},{"type":"text","value":" that assist in defining these parameters correctly.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"tnDjyFQ1n0"}],"key":"dVuJUrc6SE"}],"key":"SSPhadJ585"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from openeo.api.process import Parameter","key":"DGjWxgcGoN"},{"type":"output","id":"dtQZ94FtEwtJN5aFrV7b-","data":[],"key":"js4Nw9EigK"}],"key":"itRnkCipw8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"area_of_interest = Parameter.geojson(name='spatial_extent', description=\"Spatial extent for which to generate the variability map\")\ntime_of_interest = Parameter.date(name='date', description=\"Date for which to generate the variability map\")","key":"YLHc14wtaC"},{"type":"output","id":"ZXYhA7mbcnnJoS4S5jTJ3","data":[],"key":"L2ChIidZL2"}],"key":"cXinhgh9yM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Implementation of the workflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sGoDuho8dM"}],"identifier":"implementation-of-the-workflow","label":"Implementation of the workflow","html_id":"implementation-of-the-workflow","implicit":true,"key":"ISSBpCGNOv"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Next, we will begin implementing the variability map workflow. This involves using the predefined functions in openEO to create a straightforward workflow consisting of the following steps:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BPXrCKx77O"}],"key":"y1U3z68Iqx"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the S2 data based on the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"OpwxdgpcUS"},{"type":"inlineCode","value":"area_of_interest","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"LzpTxgGg5B"},{"type":"text","value":" and ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"IdQ3p6MBqP"},{"type":"inlineCode","value":"time_of_interest","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tvXfTB3VQh"},{"type":"text","value":" parameters.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"GVUkUhq69A"}],"key":"z5YmGUu1gY"}],"key":"MbOEInPSjW"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculate the NDVI for the S2 data.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"msMka86qJQ"}],"key":"PqzYPpezCd"}],"key":"hMHrSOv50c"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Apply an openEO User Defined Function (UDF) to calculate the deviation of each pixel against the mean pixel value of the datacube.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"wP4b1D1eLw"}],"key":"g4fhEu4MYX"}],"key":"tHQktxnAX4"}],"key":"v4gp3DC6vg"}],"key":"oRsFU5NeUW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Step 1. Select the S2 data based on the workflow parameters\ns2_cube = connection.load_collection(\n    \"SENTINEL2_L2A\",\n    spatial_extent=area_of_interest,\n    temporal_extent=[time_of_interest,time_of_interest],\n)\n    \ns2_masked = s2_cube.mask_polygon(area_of_interest)","key":"ynO90Ivh5p"},{"type":"output","id":"mSkVDWBmGeYOSzYgZ0HFK","data":[],"key":"RXrbcPXa2u"}],"key":"rf68Bcz07c"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Step 2. Calculate the S2 NDVI\ns2_ndvi = s2_masked.ndvi()","key":"JlaBUhZaDi"},{"type":"output","id":"MHP5PG10vcajCeTBRRoGq","data":[],"key":"DiaaVF00le"}],"key":"SHbRItfRlY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Step 3. Apply the UDF to calculate the variability map\ncalculate_udf = openeo.UDF.from_file(\"variability_map.py\")\nvarmap_dc = s2_ndvi.reduce_temporal(calculate_udf)","key":"p5kmaUyHnl"},{"type":"output","id":"d46oKd9lARlvr6e56aFEx","data":[],"key":"Hc7SgkUUtG"}],"key":"ApEYccJ90T"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from IPython.display import JSON\n\nJSON(varmap_dc.to_json())","key":"BuHjhlt1nN"},{"type":"output","id":"0ezO6k_Sagzdshoi9JhY3","data":[{"output_type":"execute_result","execution_count":29,"metadata":{"application/json":{"expanded":false,"root":"root"}},"data":{"application/json":{"content":"{\"process_graph\":{\"loadcollection1\":{\"arguments\":{\"id\":\"SENTINEL2_L2A\",\"spatial_extent\":{\"from_parameter\":\"spatial_extent\"},\"temporal_extent\":[{\"from_parameter\":\"date\"},{\"from_parameter\":\"date\"}]},\"process_id\":\"load_collection\"},\"maskpolygon1\":{\"arguments\":{\"data\":{\"from_node\":\"loadcollection1\"},\"mask\":{\"from_parameter\":\"spatial_extent\"}},\"process_id\":\"mask_polygon\"},\"ndvi1\":{\"arguments\":{\"data\":{\"from_node\":\"maskpolygon1\"}},\"process_id\":\"ndvi\"},\"reducedimension1\":{\"arguments\":{\"data\":{\"from_node\":\"ndvi1\"},\"dimension\":\"t\",\"reducer\":{\"process_graph\":{\"runudf1\":{\"arguments\":{\"data\":{\"from_parameter\":\"data\"},\"runtime\":\"Python\",\"udf\":\"import xarray\\nfrom openeo_udf.api.datacube import DataCube\\n\\n\\ndef apply_datacube(cube: DataCube, context) -> DataCube:\\n    import xarray\\n    import numpy as np\\n\\n    # Get the x array containing the time series\\n    array: xarray.DataArray = cube.get_array()\\n    min = 0.85\\n    max = 1.15\\n    step = 0.1\\n    mean = array.median(skipna=True)\\n    bins = np.arange(min, max + step, step) * mean.values.tolist()\\n    bins = np.concatenate([[0], bins, [255]])\\n    buckets = np.digitize(array.values, bins=bins).astype(float)\\n    return DataCube(\\n        xarray.DataArray(\\n            buckets,\\n            coords={\\n                \\\"t\\\": array.t.values,\\n                \\\"bands\\\": array.bands.values,\\n                \\\"y\\\": array.y.values,\\n                \\\"x\\\": array.x.values,\\n            },\\n            dims=[\\\"t\\\", \\\"bands\\\", \\\"y\\\", \\\"x\\\"],\\n        )\\n    )\\n\"},\"process_id\":\"run_udf\",\"result\":true}}}},\"process_id\":\"reduce_dimension\",\"result\":true}}}","content_type":"application/json"},"text/plain":{"content":"<IPython.core.display.JSON object>","content_type":"text/plain"}}}],"key":"j70ylsxT7d"}],"key":"zoYtytVKgb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create an openEO-based workflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XD4iaCeXxe"}],"identifier":"create-an-openeo-based-workflow","label":"Create an openEO-based workflow","html_id":"create-an-openeo-based-workflow","implicit":true,"key":"QrGrqx8M01"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this next step, we will create our workflow by establishing our openEO User Defined Process (UDP). This action will create a public reference to the workflow we developed in the preceding steps. This can be achieved by using the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YZoX60G8xX"},{"type":"link","url":"https://open-eo.github.io/openeo-python-client/api.html#openeo.rest.connection.Connection.save_user_defined_process","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"save_user_defined_process","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"LDH1E5HynG"}],"urlSource":"https://open-eo.github.io/openeo-python-client/api.html#openeo.rest.connection.Connection.save_user_defined_process","key":"VBFZ91OWbT"},{"type":"text","value":" function.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"lvCfErnlr0"}],"key":"apJe0VD1ED"}],"key":"lcsRfLntew"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"connection.save_user_defined_process(\n    \"variability_map\",\n    varmap_dc,\n    parameters=[area_of_interest, time_of_interest],\n    public=True\n)","key":"OU94zWVebw"},{"type":"output","id":"25jdxl6yAMuhjKMDFEMVq","data":[{"name":"stderr","output_type":"stream","text":"Preflight process graph validation raised: [UpstreamValidationInfo] Backend 'cdse' reported validation errors [ProcessParameterRequired] Process 'n/a' parameter 'spatial_extent' is required.\n"},{"output_type":"execute_result","execution_count":30,"metadata":{},"data":{"text/html":{"content":"\n    <script>\n    if (!window.customElements || !window.customElements.get('openeo-process')) {\n        var el = document.createElement('script');\n        el.src = \"https://cdn.jsdelivr.net/npm/@openeo/vue-components@2/assets/openeo.min.js\";\n        document.head.appendChild(el);\n\n        var font = document.createElement('font');\n        font.as = \"font\";\n        font.type = \"font/woff2\";\n        font.crossOrigin = true;\n        font.href = \"https://use.fontawesome.com/releases/v5.13.0/webfonts/fa-solid-900.woff2\"\n        document.head.appendChild(font);\n    }\n    </script>\n    <openeo-process>\n        <script type=\"application/json\">{\"show-graph\": true, \"provide-download\": false, \"process\": {\"id\": \"variability_map\", \"links\": [{\"href\": \"https://openeo.dataspace.copernicus.eu/openeo/1.1/processes/u:6391851f-9042-4108-8b2a-3dd2e8a9dd0b/variability_map\", \"rel\": \"canonical\", \"title\": \"Public URL for user-defined process 'variability_map'\"}, {\"href\": \"https://openeofed.dataspace.copernicus.eu/openeo/1.2/processes/u:6391851f-9042-4108-8b2a-3dd2e8a9dd0b/variability_map\", \"rel\": \"canonical\", \"title\": \"Public URL for user-defined process 'variability_map'\"}], \"parameters\": [{\"description\": \"Spatial extent for which to generate the variability map\", \"name\": \"spatial_extent\", \"schema\": {\"subtype\": \"geojson\", \"type\": \"object\"}}, {\"description\": \"Date for which to generate the variability map\", \"name\": \"date\", \"schema\": {\"format\": \"date\", \"subtype\": \"date\", \"type\": \"string\"}}], \"process_graph\": {\"loadcollection1\": {\"arguments\": {\"id\": \"SENTINEL2_L2A\", \"spatial_extent\": {\"from_parameter\": \"spatial_extent\"}, \"temporal_extent\": [{\"from_parameter\": \"date\"}, {\"from_parameter\": \"date\"}]}, \"process_id\": \"load_collection\"}, \"maskpolygon1\": {\"arguments\": {\"data\": {\"from_node\": \"loadcollection1\"}, \"mask\": {\"from_parameter\": \"spatial_extent\"}}, \"process_id\": \"mask_polygon\"}, \"ndvi1\": {\"arguments\": {\"data\": {\"from_node\": \"maskpolygon1\"}}, \"process_id\": \"ndvi\"}, \"reducedimension1\": {\"arguments\": {\"data\": {\"from_node\": \"ndvi1\"}, \"dimension\": \"t\", \"reducer\": {\"process_graph\": {\"runudf1\": {\"arguments\": {\"data\": {\"from_parameter\": \"data\"}, \"runtime\": \"Python\", \"udf\": \"import xarray\\nfrom openeo_udf.api.datacube import DataCube\\n\\n\\ndef apply_datacube(cube: DataCube, context) -> DataCube:\\n    import xarray\\n    import numpy as np\\n\\n    # Get the x array containing the time series\\n    array: xarray.DataArray = cube.get_array()\\n    min = 0.85\\n    max = 1.15\\n    step = 0.1\\n    mean = array.median(skipna=True)\\n    bins = np.arange(min, max + step, step) * mean.values.tolist()\\n    bins = np.concatenate([[0], bins, [255]])\\n    buckets = np.digitize(array.values, bins=bins).astype(float)\\n    return DataCube(\\n        xarray.DataArray(\\n            buckets,\\n            coords={\\n                \\\"t\\\": array.t.values,\\n                \\\"bands\\\": array.bands.values,\\n                \\\"y\\\": array.y.values,\\n                \\\"x\\\": array.x.values,\\n            },\\n            dims=[\\\"t\\\", \\\"bands\\\", \\\"y\\\", \\\"x\\\"],\\n        )\\n    )\\n\"}, \"process_id\": \"run_udf\", \"result\": true}}}}, \"process_id\": \"reduce_dimension\", \"result\": true}}, \"public\": true}}</script>\n    </openeo-process>\n    ","content_type":"text/html"},"text/plain":{"content":"<openeo.rest.udp.RESTUserDefinedProcess at 0x7fd68fdc2b90>","content_type":"text/plain"}}}],"key":"yqvM5Tmd8g"}],"key":"OfEZx4sdv3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2 - Creating an experiment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uDSQ9aByTG"}],"identifier":"step-2-creating-an-experiment","label":"Step 2 - Creating an experiment","html_id":"step-2-creating-an-experiment","implicit":true,"key":"dxd0pwwWvC"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"With our workflow successfully created as an openEO User Defined Process (UDP), we can now set up an experiment. This involves executing the workflow with a predefined set of input parameters. By specifying parameters such as the area of interest and time range, we can tailor the experiment to generate meaningful results.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Hc3rou9i71"}],"key":"PHyex6QqWH"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Running the experiment will produce output products, which will be displayed at the end of the notebook. These results can then be further analyzed, shared with the scientific community, or published in the EarthCODE Open Science Catalogue to promote reproducibility and collaboration.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"krhqEjAeSo"}],"key":"ZQMY3h4XPn"}],"key":"Uxn56tqBfN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"spatial_extent_value = {\n  \"type\": \"FeatureCollection\",\n  \"features\": [\n    {\n      \"type\": \"Feature\",\n      \"properties\": {},\n      \"geometry\": {\n        \"coordinates\": [\n          [\n            [\n              5.170043941798298,\n              51.25050990858725\n            ],\n            [\n              5.171035037521989,\n              51.24865722468999\n            ],\n            [\n              5.178521828188366,\n              51.24674578027137\n            ],\n            [\n              5.179084341977159,\n              51.24984764553983\n            ],\n            [\n              5.170043941798298,\n              51.25050990858725\n            ]\n          ]\n        ],\n        \"type\": \"Polygon\"\n      }\n    }\n  ]\n}\n\ndate_value = \"2025-05-01\"","key":"c2iAwCegbl"},{"type":"output","id":"arOQVotOofMbjnZ3b9lrF","data":[],"key":"VWBmKKA8Ud"}],"key":"kFT55ngjDH"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can now execute our experiment using the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TOhifqTzA0"},{"type":"inlineCode","value":"datacube_from_process","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RlF9zKtuQh"},{"type":"text","value":" function and the information from the workflow we created:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rnJREJc61W"}],"key":"F2kzG9e5fF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"process_id","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RTGqzz1OoN"},{"type":"text","value":": the ID that we have assigned to our workflow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZhHQ30JiHD"}],"key":"yEWMvgnV3V"}],"key":"HiqMwV7Fq6"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"namespace","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"UByMhfRoXY"},{"type":"text","value":": the public URL of the workflow, which is provided as output of the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Uy7PZu5to3"},{"type":"inlineCode","value":"save_user_defined_process","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Se31Y0A4oS"},{"type":"text","value":" call","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"o15MhZxxlc"}],"key":"OGA3PdbTt8"}],"key":"zmBgCfP3Me"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"**kwargs","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"f7bPGNR8Tu"},{"type":"text","value":": the parameters of the workflow. If a parameter is not specified, its default value will be used","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KRtEXB5E67"}],"key":"yZtwB9R7vT"}],"key":"p2KslMe5eW"}],"key":"O6kyy189mI"}],"key":"FcX5AvncHY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"varmap_experiment = connection.datacube_from_process(\n    process_id=\"variability_map\",\n    namespace=\"https://openeo.dataspace.copernicus.eu/openeo/1.1/processes/u:6391851f-9042-4108-8b2a-3dd2e8a9dd0b/variability_map\",\n    spatial_extent=spatial_extent_value,\n    date=date_value\n)","key":"CEZXv4BGGH"},{"type":"output","id":"IP55VIUoCi6pYtcmoLzzR","data":[],"key":"pcC19Qu1mv"}],"key":"zmpBXmux1B"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have created our experiment, we can explore how it is defined within openEO.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cTHifqk8Cr"}],"key":"gsqDgHzwDa"}],"key":"nEbBidnqLm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"JSON(varmap_experiment.to_json())","key":"dE8Qc3h1Uf"},{"type":"output","id":"6wV8vS79AuK7UB3kXjg_j","data":[{"output_type":"execute_result","execution_count":14,"metadata":{"application/json":{"expanded":false,"root":"root"}},"data":{"application/json":{"content":"{\"process_graph\":{\"variabilitymap1\":{\"arguments\":{\"date\":\"2025-05-01\",\"spatial_extent\":{\"features\":[{\"geometry\":{\"coordinates\":[[[5.170043941798298,51.25050990858725],[5.171035037521989,51.24865722468999],[5.178521828188366,51.24674578027137],[5.179084341977159,51.24984764553983],[5.170043941798298,51.25050990858725]]],\"type\":\"Polygon\"},\"properties\":{},\"type\":\"Feature\"}],\"type\":\"FeatureCollection\"}},\"namespace\":\"https://openeo.dataspace.copernicus.eu/openeo/1.1/processes/u:6391851f-9042-4108-8b2a-3dd2e8a9dd0b/variability_map\",\"process_id\":\"variability_map\",\"result\":true}}}","content_type":"application/json"},"text/plain":{"content":"<IPython.core.display.JSON object>","content_type":"text/plain"}}}],"key":"hk71lqQNZo"}],"key":"tYe3CJ5dFC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"path =  \"./varmap_experiment.tiff\"\nvarmap_experiment.execute_batch(\n    path,\n    title=\"CDSE Federation - LPS 2025 - Variability Map Experiment\", \n    description=\"This is an example experiment from CDSE containing the calculation of a variability map in Belgium\",\n)\nvisualise_tif(path)\n","key":"rxy8IagA0q"},{"type":"output","id":"jtOaHGiiO4d6xmYq_oVXr","data":[{"name":"stdout","output_type":"stream","text":"0:00:00 Job 'cdse-j-25061909182942a1a8066c844348fa89': send 'start'\n0:00:14 Job 'cdse-j-25061909182942a1a8066c844348fa89': created (progress 0%)\n0:00:19 Job 'cdse-j-25061909182942a1a8066c844348fa89': created (progress 0%)\n0:00:26 Job 'cdse-j-25061909182942a1a8066c844348fa89': created (progress 0%)\n0:00:34 Job 'cdse-j-25061909182942a1a8066c844348fa89': created (progress 0%)\n0:00:45 Job 'cdse-j-25061909182942a1a8066c844348fa89': running (progress N/A)\n0:00:57 Job 'cdse-j-25061909182942a1a8066c844348fa89': running (progress N/A)\n0:01:13 Job 'cdse-j-25061909182942a1a8066c844348fa89': running (progress N/A)\n0:01:32 Job 'cdse-j-25061909182942a1a8066c844348fa89': running (progress N/A)\n0:01:57 Job 'cdse-j-25061909182942a1a8066c844348fa89': finished (progress 100%)\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b3bd71d50dbbcafec7f39f0f04eaaba6","path":"/example-viewer/build/b3bd71d50dbbcafec7f39f0f04eaaba6.png"},"text/plain":{"content":"<Figure size 1000x1000 with 2 Axes>","content_type":"text/plain"}}}],"key":"OVmUvb57fV"}],"key":"eMBl8GQPNe"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3 - Publish the experiment to the OSC","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nauox3NE46"}],"identifier":"step-3-publish-the-experiment-to-the-osc","label":"Step 3 - Publish the experiment to the OSC","html_id":"step-3-publish-the-experiment-to-the-osc","implicit":true,"key":"aOCKZN5ObY"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The next step is to publish the experiment to the EarthCODE Open Science Catalogue. This can be done by navigating to the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AknXz6mP6M"},{"type":"link","url":"https://publish.earthcode.vito.be/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"openEO Publishing tool","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"I1JQ9XBSol"}],"urlSource":"https://publish.earthcode.vito.be/","key":"yBsHtBXbOC"},{"type":"text","value":", which will guide you through the process of publishing the experiment. The publishing tool will create a GitHub pull request on the OSC with all the necessary information required to publish the experiment, including details about the product and the workflow. The experiment will only be available in the catalogue once the pull request is approved. However, for the purpose of this demonstration, we can proceed with the information available in the pull request.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AcqWy2KET0"}],"key":"Yzk4Mk0fh2"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The only information you’ll need to publish the experiment is the URL to your workflow. This corresponds to the public URL of the UDP that was created in previous steps. In this case, the workflow URL is ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZBD5CkGp2v"},{"type":"link","url":"https://openeo.dataspace.copernicus.eu/openeo/1.1/processes/u:6391851f-9042-4108-8b2a-3dd2e8a9dd0b/variability_map","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://​openeo​.dataspace​.copernicus​.eu​/openeo​/1​.1​/processes​/u:6391851f​-9042​-4108​-8b2a​-3dd2e8a9dd0b​/variability​_map","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"njPKkPIkse"}],"urlSource":"https://openeo.dataspace.copernicus.eu/openeo/1.1/processes/u:6391851f-9042-4108-8b2a-3dd2e8a9dd0b/variability_map","key":"rIIh7WpXpa"}],"key":"SsAY8aXmmY"},{"type":"image","url":"/example-viewer/build/11f9efdaa09749c234c41a8bcccc89af.png","alt":"image-2.png","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"kj3mXMPfV9","urlSource":"data:image/png;base64,iVBORw0KGg...5ErkJggg=="},{"type":"image","url":"/example-viewer/build/f827cb0e1e9625399cd56ab7049a0b2a.png","alt":"image.png","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"nroVuKoJiS","urlSource":"data:image/png;base64,iVBORw0KGg...lFTkSuQmCC"}],"key":"qnpnSlU9PG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 4 - Reproduce the experiment from the OSC","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"W6Zq6rcfX5"}],"identifier":"step-4-reproduce-the-experiment-from-the-osc","label":"Step 4 - Reproduce the experiment from the OSC","html_id":"step-4-reproduce-the-experiment-from-the-osc","implicit":true,"key":"GCyLLsTqAi"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this final step, we will use your newly published experiment and reproduce it. As the published experiment is still in review on the PR, we will use the information on GitHub to re-execute our experiment. The URL that we need needs to refer to the following file experiments/experiment_id/process_graph.json.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YHhjdh1YuW"}],"key":"qIdEkrdXMQ"}],"key":"tbAsst4PPo"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"experiment_url = \"https://raw.githubusercontent.com/ESA-EarthCODE/open-science-catalog-metadata-testing/631bda3e59cb6eec9b6cfc1b2edb68778f8f1edc/experiments/cdse_federation_-_lps_2025_-_variability_map_experiment/process_graph.json\"","key":"YBSQlCEXml"},{"type":"output","id":"UuoEEkKzoO4RyTUsqLU5e","data":[],"key":"S1oZz9n9eJ"}],"key":"L7GiayY6OT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Using the openEO client","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BnYDOm401C"}],"identifier":"using-the-openeo-client","label":"Using the openEO client","html_id":"using-the-openeo-client","implicit":true,"key":"Tc2tccAcXj"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The first option to execute an existing experiment is through the openEO Python client. By using openEO’s ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"h1NdhtAKm0"},{"type":"inlineCode","value":"datacube_from_json","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rLACjmBAwi"},{"type":"text","value":", you can import the published experiment from the OSC into openEO.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"laPBRqIMoH"}],"key":"DyYcjXUxR2"}],"key":"C82SD9ax9t"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"experiment = connection.datacube_from_json(experiment_url)\nJSON(experiment.to_json())","key":"A7ktq1sd4I"},{"type":"output","id":"kJ5YNpVDbxXnFl64LWeGt","data":[{"output_type":"execute_result","execution_count":17,"metadata":{"application/json":{"expanded":false,"root":"root"}},"data":{"application/json":{"content":"{\"process_graph\":{\"saveresult1\":{\"arguments\":{\"data\":{\"from_node\":\"variabilitymap1\"},\"format\":\"GTiff\",\"options\":{}},\"process_id\":\"save_result\",\"result\":true},\"variabilitymap1\":{\"arguments\":{\"date\":\"2025-05-01\",\"spatial_extent\":{\"features\":[{\"geometry\":{\"coordinates\":[[[5.170043941798298,51.25050990858725],[5.171035037521989,51.24865722468999],[5.178521828188366,51.24674578027137],[5.179084341977159,51.24984764553983],[5.170043941798298,51.25050990858725]]],\"type\":\"Polygon\"},\"properties\":{},\"type\":\"Feature\"}],\"type\":\"FeatureCollection\"}},\"namespace\":\"https://openeo.dataspace.copernicus.eu/openeo/1.1/processes/u:6391851f-9042-4108-8b2a-3dd2e8a9dd0b/variability_map\",\"process_id\":\"variability_map\"}}}","content_type":"application/json"},"text/plain":{"content":"<IPython.core.display.JSON object>","content_type":"text/plain"}}}],"key":"vjSZCaxRfZ"}],"key":"bHWCjFsf1r"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"path =  \"./varmap_experiment_reproduce.tiff\"\nexperiment.execute_batch(\n    path,\n    title=\"CDSE Federation - Variability Map Experiment (reproduce)\"\n)\nvisualise_tif(path)","key":"Up5CWIRN6I"},{"type":"output","id":"neMaqKIZoaYtok0LCaeFI","data":[{"name":"stdout","output_type":"stream","text":"0:00:00 Job 'cdse-j-250619092230432c80381a66e4d22e25': send 'start'\n0:00:14 Job 'cdse-j-250619092230432c80381a66e4d22e25': created (progress 0%)\n0:00:19 Job 'cdse-j-250619092230432c80381a66e4d22e25': created (progress 0%)\n0:00:25 Job 'cdse-j-250619092230432c80381a66e4d22e25': created (progress 0%)\n0:00:34 Job 'cdse-j-250619092230432c80381a66e4d22e25': created (progress 0%)\n0:00:44 Job 'cdse-j-250619092230432c80381a66e4d22e25': running (progress N/A)\n0:00:56 Job 'cdse-j-250619092230432c80381a66e4d22e25': running (progress N/A)\n0:01:13 Job 'cdse-j-250619092230432c80381a66e4d22e25': running (progress N/A)\n0:01:33 Job 'cdse-j-250619092230432c80381a66e4d22e25': running (progress N/A)\n0:01:57 Job 'cdse-j-250619092230432c80381a66e4d22e25': finished (progress 100%)\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b3bd71d50dbbcafec7f39f0f04eaaba6","path":"/example-viewer/build/b3bd71d50dbbcafec7f39f0f04eaaba6.png"},"text/plain":{"content":"<Figure size 1000x1000 with 2 Axes>","content_type":"text/plain"}}}],"key":"BaOEEURr6r"}],"key":"Y3gwXCDQZH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import numpy as np\n\n\ndef compare_geotiff(file1: str, file2: str) -> bool:\n    with rasterio.open(file1) as src1, rasterio.open(file2) as src2:\n        # Check if dimensions match\n        if src1.width != src2.width or src1.height != src2.height:\n            return False\n        \n        # Check if coordinate reference systems match\n        if src1.crs != src2.crs:\n            return False\n        \n        # Check if transform properties match\n        if src1.transform != src2.transform:\n            return False\n        \n        # Compare pixel values\n        data1 = src1.read()\n        data2 = src2.read()\n        if not np.array_equal(data1, data2):\n            return False\n\n    return True\n\n# Call the function with the specified files\nare_equal = compare_geotiff(\"./varmap_experiment.tiff\", \"./varmap_experiment_reproduce.tiff\")\nprint(f\"Are the GeoTIFF files equal? {are_equal}\")","key":"lgrsHurDmP"},{"type":"output","id":"c_Ie4Ska-VDnlttCytw8f","data":[{"name":"stdout","output_type":"stream","text":"Are the GeoTIFF files equal? True\n"}],"key":"DRQ20zW8Dx"}],"key":"aSutHPWA72"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Using the openEO Web Editor","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PiA7uJvd8w"}],"identifier":"using-the-openeo-web-editor","label":"Using the openEO Web Editor","html_id":"using-the-openeo-web-editor","implicit":true,"key":"vmRoklk9XW"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Alternatively, you can also open the experiment through the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wPLDu7Mq2j"},{"type":"link","url":"https://openeofed.dataspace.copernicus.eu","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"openEO Web Editor","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bKYd7jnFFA"}],"urlSource":"https://openeofed.dataspace.copernicus.eu","key":"T9CX7h2Ykd"},{"type":"text","value":" using the experiment URL. This can be done by clicking the ‘Import process from an external source’ button located in the top navigation bar.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MS5nM3DUBN"}],"key":"JZv5nHwKyt"},{"type":"image","url":"/example-viewer/build/b5bc094377d555fd7f27374f430caf6e.png","alt":"image.png","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"C7RhQ11twj","urlSource":"data:image/png;base64,iVBORw0KGg...5ErkJggg=="},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Next, paste the experiment URL into the window to fetch the experiment and open it in the editor.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"En7ClEDBfe"}],"key":"L8aLWiwEvD"},{"type":"image","url":"/example-viewer/build/a5ac6d887b0e1417d67ddccab9a788df.png","alt":"image-2.png","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"gcFD5my5BD","urlSource":"data:image/png;base64,iVBORw0KGg...lFTkSuQmCC"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Finally, click the ‘Create Batch Job’ button to initiate the execution of the experiment.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"JJx8ziBv8A"}],"key":"JnlPMv6pww"},{"type":"image","url":"/example-viewer/build/2abb5c3177a7a9f5243dc1874208c83f.png","alt":"image-3.png","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"MfSgPYaha9","urlSource":"data:image/png;base64,iVBORw0KGg...5ErkJggg=="}],"key":"tzLK5quS1N"}],"key":"JqC0PrWmAt"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Reproducing an openEO Experiment published to the EarthCODE Open Science Catalogue","url":"/external-notebooks/earthcode/examples/openeo/reproduce","group":"Openeo"},"next":{"title":"Open Science Catalog","url":"/external-notebooks/earthcode/examples/osc","group":"OSC"}}},"domain":"http://localhost:3000"}